# üß™ Mock —Ä–µ–∂–∏–º AI Parser - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## –ß—Ç–æ —ç—Ç–æ?

Mock —Ä–µ–∂–∏–º –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å AI –ø–∞—Ä—Å–µ—Ä **–±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è OpenAI API**, —á—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –∫–æ–≥–¥–∞:
- ‚ùå –ò—Å—á–µ—Ä–ø–∞–Ω–∞ –∫–≤–æ—Ç–∞ OpenAI
- üí∞ –ù–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ
- üß™ –¢–µ—Å—Ç–∏—Ä—É–µ—Ç–µ UI –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö AI –∑–∞–ø—Ä–æ—Å–æ–≤
- üöÄ –•–æ—Ç–∏—Ç–µ –±—ã—Å—Ç—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫ API

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –í–∫–ª—é—á–∏—Ç–µ mock —Ä–µ–∂–∏–º

```bash
cd /Users/firdavsabdulloev/Alif/ai-app/apps/backend

# –û—Ç–∫—Ä–æ–π—Ç–µ .env
nano .env

# –î–æ–±–∞–≤—å—Ç–µ –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
OPENAI_MOCK_MODE=true
```

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend

```bash
cd /Users/firdavsabdulloev/Alif/ai-app
yarn dev:backend
```

**–í –ª–æ–≥–∞—Ö —É–≤–∏–¥–∏—Ç–µ:**
```
üß™ OpenAI MOCK MODE enabled - AI requests will be simulated
```

### 3. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ!

```bash
curl -X POST http://localhost:3001/api/ai/parse \
  -H "Content-Type: application/json" \
  -d '{"text": "–∫–æ—Ñ–µ 25—Å–º–Ω –∏ —á–∏–∑–∫–µ–π–∫ 15—Å–º–Ω"}'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "transactions": [
    {
      "description": "MOCK: –∫–æ—Ñ–µ 25—Å–º–Ω –∏ —á–∏–∑–∫–µ–π–∫ 15—Å–º–Ω",
      "amount": 25,
      "currency": "TJS",
      "type": "expense",
      ...
    },
    {
      "description": "MOCK: –∫–æ—Ñ–µ 25—Å–º–Ω –∏ —á–∏–∑–∫–µ–π–∫ 15—Å–º–Ω",
      "amount": 15,
      "currency": "TJS",
      "type": "expense",
      ...
    }
  ],
  "message": "üß™ MOCK: –°–æ–∑–¥–∞–Ω–æ 2 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (—Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º)"
}
```

---

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç mock —Ä–µ–∂–∏–º

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø–∞—Ä—Å–∏–Ω–≥–∞:

1. **–ò—â–µ—Ç –≤—Å–µ —á–∏—Å–ª–∞** –≤ —Ç–µ–∫—Å—Ç–µ —Å –ø–æ–º–æ—â—å—é regex: `/\d+/g`
2. **–î–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∏—Å–ª–∞** —Å–æ–∑–¥–∞—ë—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é:
   - Type: `expense` (—Ä–∞—Å—Ö–æ–¥)
   - Amount: –Ω–∞–π–¥–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ
   - Currency: `TJS`
   - Category: –ø–µ—Ä–≤–∞—è –¥–æ—Å—Ç—É–ø–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤
   - Description: `MOCK: {–ø–µ—Ä–≤—ã–µ 30 —Å–∏–º–≤–æ–ª–æ–≤ —Ç–µ–∫—Å—Ç–∞}`

3. **–ï—Å–ª–∏ —á–∏—Å–µ–ª –Ω–µ—Ç** - —Å–æ–∑–¥–∞—ë—Ç –æ–¥–Ω—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é —Å —Å—É–º–º–æ–π 10 TJS

### –ü—Ä–∏–º–µ—Ä—ã:

**–í—Ö–æ–¥:** `"–∫–æ—Ñ–µ 25—Å–º–Ω –∏ —á–∏–∑–∫–µ–π–∫ 15—Å–º–Ω"`  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 2 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (25 –∏ 15 TJS)

**–í—Ö–æ–¥:** `"–ø–æ–∫—É–ø–∫–∞ 100"`  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 1 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è (100 TJS)

**–í—Ö–æ–¥:** `"–ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç"`  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 1 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è (10 TJS –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–í—Ö–æ–¥:** `"22, 15, 8"`  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 3 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (22, 15, 8 TJS)

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –í–∫–ª—é—á–∏—Ç—å mock —Ä–µ–∂–∏–º:
```bash
# –í .env
OPENAI_MOCK_MODE=true
```

### –í—ã–∫–ª—é—á–∏—Ç—å mock —Ä–µ–∂–∏–º (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π AI):
```bash
# –í .env
OPENAI_MOCK_MODE=false
# –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏—Ç–µ —Å—Ç—Ä–æ–∫—É
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º:

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ backend —Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:
- üß™ Mock: `OpenAI MOCK MODE enabled`
- ‚úÖ Real: `OpenAI client initialized with API key`

---

## üîç –û—Ç–ª–∏—á–∏—è –æ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ AI

| –§—É–Ω–∫—Ü–∏—è | Mock —Ä–µ–∂–∏–º | –†–µ–∞–ª—å–Ω—ã–π AI |
|---------|-----------|-------------|
| –°–∫–æ—Ä–æ—Å—Ç—å | ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ | üêå 1-3 —Å–µ–∫ |
| –°—Ç–æ–∏–º–æ—Å—Ç—å | üí∞ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ | üíµ $0.00015/–∑–∞–ø—Ä–æ—Å |
| –¢–æ—á–Ω–æ—Å—Ç—å | üìâ –ü—Ä–æ—Å—Ç–æ–π regex | üéØ GPT-4o-mini |
| –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ | üè∑Ô∏è –í—Å–µ–≥–¥–∞ –ø–µ—Ä–≤–∞—è | ü§ñ –£–º–Ω—ã–π –≤—ã–±–æ—Ä |
| –û–ø–∏—Å–∞–Ω–∏–µ | üìù –ü—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç | üìñ –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å—É—Ç—å |
| –í–∞–ª—é—Ç—ã | üí± –¢–æ–ª—å–∫–æ TJS | üåç TJS, RUB, USD, KZT |
| –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏ | ‚úÖ –ü–æ —á–∏—Å–ª–∞–º | ‚úÖ –ü–æ —Å–º—ã—Å–ª—É |

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –¢–µ—Å—Ç 1: –ü—Ä–æ—Å—Ç–∞—è –ø–æ–∫—É–ø–∫–∞
```bash
curl -X POST http://localhost:3001/api/ai/parse \
  -H "Content-Type: application/json" \
  -d '{"text": "–∫–æ—Ñ–µ 25—Å–º–Ω"}'
```
‚úÖ –û–∂–∏–¥–∞–µ–º: 1 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è, 25 TJS

### –¢–µ—Å—Ç 2: –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–∫—É–ø–æ–∫
```bash
curl -X POST http://localhost:3001/api/ai/parse \
  -H "Content-Type: application/json" \
  -d '{"text": "–∫–æ—Ñ–µ 22—Å–º–Ω, –∫—Ä—É–∞—Å–∞–Ω 12—Å–º–Ω, –≤–æ–¥–∞ 5—Å–º–Ω"}'
```
‚úÖ –û–∂–∏–¥–∞–µ–º: 3 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (22, 12, 5 TJS)

### –¢–µ—Å—Ç 3: –ë–µ–∑ —á–∏—Å–µ–ª
```bash
curl -X POST http://localhost:3001/api/ai/parse \
  -H "Content-Type: application/json" \
  -d '{"text": "–∫—É–ø–∏–ª –∫–æ—Ñ–µ"}'
```
‚úÖ –û–∂–∏–¥–∞–µ–º: 1 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è, 10 TJS (–¥–µ—Ñ–æ–ª—Ç)

### –¢–µ—Å—Ç 4: –ë–æ–ª—å—à–∞—è —Å—É–º–º–∞
```bash
curl -X POST http://localhost:3001/api/api/parse \
  -H "Content-Type: application/json" \
  -d '{"text": "–∑–∞—Ä–ø–ª–∞—Ç–∞ 5000 —Å–æ–º–æ–Ω–∏"}'
```
‚úÖ –û–∂–∏–¥–∞–µ–º: 1 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è, 5000 TJS

---

## üí° –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ mock —Ä–µ–∂–∏–º –¥–ª—è:
- üß™ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI
- üé® –î–∏–∑–∞–π–Ω –∏ UX –ø—Ä–æ–≤–µ—Ä–∫–∏
- üêõ –û—Ç–ª–∞–¥–∫–∞ backend –ª–æ–≥–∏–∫–∏
- üìä –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- üí∞ –≠–∫–æ–Ω–æ–º–∏—è –∫–≤–æ—Ç—ã OpenAI

### ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ mock —Ä–µ–∂–∏–º –¥–ª—è:
- üöÄ Production –æ–∫—Ä—É–∂–µ–Ω–∏—è
- üìù –†–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- üéØ –¢–æ—á–Ω–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
- üåç –ü–∞—Ä—Å–∏–Ω–≥–∞ —Ä–∞–∑–Ω—ã—Ö –≤–∞–ª—é—Ç
- ü§ñ –£–º–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

---

## üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤

### –ò–∑ mock –≤ —Ä–µ–∞–ª—å–Ω—ã–π AI:

1. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å OpenAI –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ –∫–ª—é—á
2. –û—Ç–∫—Ä–æ–π—Ç–µ `.env`:
   ```bash
   OPENAI_MOCK_MODE=false  # –∏–ª–∏ —É–¥–∞–ª–∏—Ç–µ —Å—Ç—Ä–æ–∫—É
   OPENAI_API_KEY=–≤–∞—à_–≤–∞–ª–∏–¥–Ω—ã–π_–∫–ª—é—á
   ```
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `OpenAI client initialized`

### –ò–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ AI –≤ mock:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `.env`:
   ```bash
   OPENAI_MOCK_MODE=true
   ```
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `MOCK MODE enabled`

---

## üìä –õ–æ–≥–∏ mock —Ä–µ–∂–∏–º–∞

**–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ:**
```
üß™ OpenAI MOCK MODE enabled - AI requests will be simulated
[Nest] LOG Application listening on port 3001
```

**–ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ:**
```
ü§ñ AI Parse Request: { text: '–∫–æ—Ñ–µ 25—Å–º–Ω', accountId: '...' }
üß™ MOCK MODE: Simulating AI response for: –∫–æ—Ñ–µ 25—Å–º–Ω
‚úÖ MOCK: Created 1 transactions
```

**–í –æ—Ç–≤–µ—Ç–µ:**
```json
{
  "message": "üß™ MOCK: –°–æ–∑–¥–∞–Ω–æ 1 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (—Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º)"
}
```

–≠–º–æ–¥–∑–∏ üß™ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è mock —Ä–µ–∂–∏–º.

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Mock —Ä–µ–∂–∏–º –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
```bash
cat apps/backend/.env | grep MOCK
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: OPENAI_MOCK_MODE=true
```

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend:**
```bash
# Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å backend
yarn dev:backend
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–æ–∑–¥–∞—ë—Ç—Å—è –Ω–µ —Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

Mock —Ä–µ–∂–∏–º **–Ω–∞—Ö–æ–¥–∏—Ç –í–°–ï —á–∏—Å–ª–∞** –≤ —Ç–µ–∫—Å—Ç–µ. –ü—Ä–∏–º–µ—Ä—ã:
- `"22 –∏ 15"` ‚Üí 2 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `"–≤ 22:00 –∫—É–ø–∏–ª –∫–æ—Ñ–µ 15—Å–º–Ω"` ‚Üí 3 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (22, 0, 15) ‚ö†Ô∏è
- `"–∫–æ—Ñ–µ"` ‚Üí 1 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è (10 TJS –¥–µ—Ñ–æ–ª—Ç)

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–∫—Å—Ç –±–µ–∑ –ª–∏—à–Ω–∏—Ö —á–∏—Å–µ–ª.

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è

Mock —Ä–µ–∂–∏–º **–≤—Å–µ–≥–¥–∞ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–µ—Ä–≤—É—é –¥–æ—Å—Ç—É–ø–Ω—É—é** –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ä–∞—Å—Ö–æ–¥–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑–º–µ–Ω–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ UI.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```bash
# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
./diagnose-ai.sh

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —É—Å–ø–µ—Ö —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º:
# "üß™ MOCK: –°–æ–∑–¥–∞–Ω–æ X —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (—Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º)"
```

---

**Mock —Ä–µ–∂–∏–º –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å AI –ø–∞—Ä—Å–µ—Ä –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è OpenAI –∫–≤–æ—Ç—ã.

