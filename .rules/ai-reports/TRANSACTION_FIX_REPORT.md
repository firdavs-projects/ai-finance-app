# –û—Ç—á—ë—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**–î–∞—Ç–∞:** 25 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:

```json
{
  "error": "Bad Request",
  "message": [
    "property place should not exist",
    "property comment should not exist"
  ],
  "statusCode": 400
}
```

## –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–ª —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –ø–æ–ª–µ–π –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (`place`, `comment`, `person`, `debtSubType`, `accountToId`), –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±—ã–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ –±—ç–∫–µ–Ω–¥ DTO (`CreateTransactionDto`), —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏–∑-–∑–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `forbidNonWhitelisted: true` –≤ ValidationPipe.

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª—ë–Ω DTO –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
**–§–∞–π–ª:** `apps/backend/src/modules/transactions/dto/create-transaction.dto.ts`

–î–æ–±–∞–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:
- ‚úÖ `place?: string` - –º–µ—Å—Ç–æ —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤)
- ‚úÖ `comment?: string` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- ‚úÖ `person?: string` - –∏–º—è —á–µ–ª–æ–≤–µ–∫–∞ (–¥–ª—è –¥–æ–ª–≥–æ–≤)
- ‚úÖ `debtSubType?: 'i_gave' | 'i_returned' | 'they_gave' | 'they_returned'` - –ø–æ–¥—Ç–∏–ø –¥–æ–ª–≥–∞
- ‚úÖ `accountToId?: string` - —Å—á—ë—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—è (–¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ç–∏–ø `'debt'` –≤ enum —Ç–∏–ø–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚úÖ –ü–æ–ª–µ `categoryId` —Å–¥–µ–ª–∞–Ω–æ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º (–¥–ª—è –¥–æ–ª–≥–æ–≤ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

### 2. –û–±–Ω–æ–≤–ª—ë–Ω —Å–µ—Ä–≤–∏—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
**–§–∞–π–ª:** `apps/backend/src/modules/transactions/transactions.service.ts`

- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Transaction` —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
- ‚úÖ –ú–µ—Ç–æ–¥ `create()` —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ –æ–±—ä–µ–∫—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ç–∏–ø–∞ "expense" —Å –ø–æ–ª—è–º–∏ place –∏ comment
```bash
curl -X POST http://localhost:3001/api/transactions \
  -H "Content-Type: application/json" \
  -d '{
    "type": "expense",
    "amount": 100,
    "currency": "TJS",
    "categoryId": "cafe",
    "accountId": "test-account-123",
    "description": "–ê–º–µ—Ä–∏–∫–∞–Ω–æ",
    "place": "–ö–æ—Ñ–µ–π–Ω—è –Ω–∞ —É–≥–ª—É",
    "comment": "–û—á–µ–Ω—å –≤–∫—É—Å–Ω—ã–π –∫–æ—Ñ–µ"
  }'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ

### –¢–µ—Å—Ç 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ç–∏–ø–∞ "debt" —Å –ø–æ–ª—è–º–∏ person –∏ debtSubType
```bash
curl -X POST http://localhost:3001/api/transactions \
  -H "Content-Type: application/json" \
  -d '{
    "type": "debt",
    "amount": 500,
    "accountId": "test-account-123",
    "person": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
    "debtSubType": "i_gave",
    "comment": "–î–æ–ª–≥ –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞"
  }'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
–í—Å–µ –Ω–æ–≤—ã–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Swagger UI:
- üìö Swagger –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:3001/api/docs
- ‚úÖ –í—Å–µ –ø–æ–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- ‚úÖ Enum –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è `debtSubType` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞. –ë—ç–∫–µ–Ω–¥ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:
- ‚úÖ `place` - –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –º–µ—Å—Ç–∞ —Ä–∞—Å—Ö–æ–¥–∞
- ‚úÖ `comment` - –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- ‚úÖ `person` - –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –∏–º–µ–Ω–∏ —á–µ–ª–æ–≤–µ–∫–∞ –≤ –¥–æ–ª–≥–æ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö
- ‚úÖ `debtSubType` - –¥–ª—è —Ç–∏–ø–∞ –¥–æ–ª–≥–æ–≤–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ `accountToId` - –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—à–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –±–µ–∑ –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ TypeScript.

