# ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞: OpenAI Quota Exceeded

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–ø—Ä–æ—Å—ã –¥–æ—Ö–æ–¥—è—Ç –¥–æ OpenAI  
**–ü—Ä–æ–±–ª–µ–º–∞**: ‚ùå –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç/–∫–≤–æ—Ç–∞ –Ω–∞ API –∫–ª—é—á–µ

**–û—à–∏–±–∫–∞ –æ—Ç OpenAI**:
```
429 You exceeded your current quota, please check your plan and billing details.
```

---

## üí° –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç

–í–∞—à OpenAI API –∫–ª—é—á –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- –õ–∏–±–æ **–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–≤–æ—Ç–∞ –∏—Å—á–µ—Ä–ø–∞–Ω–∞**
- –õ–∏–±–æ **–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ**
- –õ–∏–±–æ **–ø—Ä–µ–≤—ã—à–µ–Ω rate limit**

---

## üîß –†–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –∏ –ø–æ–ø–æ–ª–Ω–∏—Ç—å (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://platform.openai.com/usage
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - **Usage** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –∫—Ä–µ–¥–∏—Ç—ã
   - **Limits** - —Ç–µ–∫—É—â–∏–µ –ª–∏–º–∏—Ç—ã
   - **Billing** - –±–∞–ª–∞–Ω—Å —Å—á—ë—Ç–∞

3. –ï—Å–ª–∏ –±–∞–ª–∞–Ω—Å $0.00:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Billing**: https://platform.openai.com/settings/organization/billing/overview
   - –î–æ–±–∞–≤—å—Ç–µ –ø–ª–∞—Ç—ë–∂–Ω—ã–π –º–µ—Ç–æ–¥
   - –ü–æ–ø–æ–ª–Ω–∏—Ç–µ —Å—á—ë—Ç (–º–∏–Ω–∏–º—É–º $5)

4. –ï—Å–ª–∏ –µ—Å—Ç—å free trial:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –∏—Å—Ç—ë–∫ –ª–∏ –æ–Ω
   - Free trial –æ–±—ã—á–Ω–æ $5 –Ω–∞ 3 –º–µ—Å—è—Ü–∞

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π API –∫–ª—é—á

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://platform.openai.com/api-keys
2. –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–π –∫–ª—é—á (–µ—Å–ª–∏ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω)
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π: **Create new secret key**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á
5. –û–±–Ω–æ–≤–∏—Ç–µ `.env`:
   ```bash
   cd /Users/firdavsabdulloev/Alif/ai-app/apps/backend
   nano .env
   # –ò–∑–º–µ–Ω–∏—Ç–µ OPENAI_API_KEY=–Ω–æ–≤—ã–π_–∫–ª—é—á
   ```
6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend:
   ```bash
   yarn dev:backend
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å rate limits

–ï—Å–ª–∏ —É –≤–∞—Å Pay-as-you-go, –Ω–æ –≤—ã –¥–µ–ª–∞–µ—Ç–µ –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤:

1. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç
2. Rate limits –æ–±—ã—á–Ω–æ:
   - **Tier 1** (–Ω–æ–≤—ã–µ): 500 RPM (requests per minute)
   - **Tier 2** ($50+): 5000 RPM

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã: https://platform.openai.com/settings/organization/limits

### –í–∞—Ä–∏–∞–Ω—Ç 4: –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ mock-—Å–µ—Ä–≤–∏—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è UI –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ OpenAI.

**–°–æ–∑–¥–∞–π—Ç–µ mock —Ä–µ–∂–∏–º –≤ AI —Å–µ—Ä–≤–∏—Å–µ:**

```typescript
// –í ai.service.ts –¥–æ–±–∞–≤—å—Ç–µ:
private readonly MOCK_MODE = process.env.OPENAI_MOCK_MODE === 'true';

async parseAndCreateTransactions(text: string, accountId?: string) {
  // –ï—Å–ª–∏ mock —Ä–µ–∂–∏–º
  if (this.MOCK_MODE) {
    console.log('üß™ MOCK MODE: Simulating AI response');
    return this.mockParseResponse(text, accountId);
  }
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
}

private mockParseResponse(text: string, accountId: string) {
  // –ü—Ä–æ—Å—Ç–æ–π –ø–∞—Ä—Å–∏–Ω–≥ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  const numbers = text.match(/\d+/g) || [];
  const amount = numbers.length > 0 ? parseFloat(numbers[0]) : 10;
  
  return {
    success: true,
    transactions: [{
      description: text.substring(0, 30),
      amount: amount,
      currency: 'TJS',
      type: 'expense'
    }],
    message: 'MOCK: –°–æ–∑–¥–∞–Ω–∞ 1 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è'
  };
}
```

**–í–∫–ª—é—á–∏—Ç–µ –≤ `.env`:**
```bash
OPENAI_MOCK_MODE=true
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
1. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å OpenAI ($5-10 —Ö–≤–∞—Ç–∏—Ç –Ω–∞–¥–æ–ª–≥–æ)
2. gpt-4o-mini —Å—Ç–æ–∏—Ç –æ—á–µ–Ω—å –¥—ë—à–µ–≤–æ: ~$0.00015 –∑–∞ –∑–∞–ø—Ä–æ—Å
3. 1000 –∑–∞–ø—Ä–æ—Å–æ–≤ ‚âà $0.15

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ mock —Ä–µ–∂–∏–º (–í–∞—Ä–∏–∞–Ω—Ç 4)
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ UI –∏ –ª–æ–≥–∏–∫—É
3. –ó–∞—Ç–µ–º –≤–∫–ª—é—á–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π AI

---

## üìä –°—Ç–æ–∏–º–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**GPT-4o-mini pricing:**
- Input: $0.150 / 1M tokens
- Output: $0.600 / 1M tokens

**–ù–∞—à —Å—Ä–µ–¥–Ω–∏–π –∑–∞–ø—Ä–æ—Å:**
- System prompt: ~500 tokens
- User message: ~50 tokens
- Response: ~200 tokens
- **–ò—Ç–æ–≥–æ**: ~750 tokens = $0.00015 –∑–∞ –∑–∞–ø—Ä–æ—Å

**–ü—Ä–∏–º–µ—Ä–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã:**
- 100 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å = $0.015/–¥–µ–Ω—å = $0.45/–º–µ—Å—è—Ü
- 1000 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å = $0.15/–¥–µ–Ω—å = $4.50/–º–µ—Å—è—Ü

–û—á–µ–Ω—å –¥—ë—à–µ–≤–æ! üí∞

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞:

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend
yarn dev:backend

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
./diagnose-ai.sh

# –ò–ª–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞–ø—Ä—è–º—É—é
curl -X POST http://localhost:3001/api/ai/parse \
  -H "Content-Type: application/json" \
  -d '{"text": "—Ç–µ—Å—Ç 10—Å–º–Ω"}'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "transactions": [...],
  "message": "–°–æ–∑–¥–∞–Ω–æ 1 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π"
}
```

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Usage**: https://platform.openai.com/usage
- **Billing**: https://platform.openai.com/settings/organization/billing/overview
- **API Keys**: https://platform.openai.com/api-keys
- **Rate Limits**: https://platform.openai.com/settings/organization/limits
- **Pricing**: https://openai.com/api/pricing/

---

## üìù –†–µ–∑—é–º–µ

‚úÖ **–•–æ—Ä–æ—à–∞—è –Ω–æ–≤–æ—Å—Ç—å**: –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ! –ó–∞–ø—Ä–æ—Å—ã –¥–æ—Ö–æ–¥—è—Ç –¥–æ OpenAI.  
‚ùå **–ü–ª–æ—Ö–∞—è –Ω–æ–≤–æ—Å—Ç—å**: –ù—É–∂–Ω–æ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å API –∫–ª—é—á.  
üí° **–†–µ—à–µ–Ω–∏–µ**: –ü–æ–ø–æ–ª–Ω–∏—Ç–µ $5-10 –Ω–∞ OpenAI –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ mock —Ä–µ–∂–∏–º –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

---

**–ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!** –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ —Ä–µ—à–∏—Ç—å –≤–æ–ø—Ä–æ—Å —Å –∫–≤–æ—Ç–æ–π OpenAI. üéâ

